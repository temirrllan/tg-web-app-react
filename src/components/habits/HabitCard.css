/* Wrapper для изоляции свайпа */
.habit-card-wrapper {
  width: 100%;
  overflow: hidden;
  padding: 0;
  margin: 0;
}

.habit-card-container {
  position: relative;
  display: flex;
  align-items: center;
  margin-bottom: 12px;
  height: 80px;
  /* Критически важно для мобильных */
  touch-action: pan-y;
  -webkit-user-select: none;
  user-select: none;
}

/* Основная карточка */
.habit-card {
  position: relative;
  width: 100%;
  background: #FFFFFF;
  border-radius: 20px;
  padding: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  cursor: grab;
  user-select: none;
  -webkit-user-select: none;
 z-index: 2;
 /* Важно для плавности */
 will-change: transform;
 transition: transform 0.2s ease-out;
 /* Предотвращаем мерцание на iOS */
 -webkit-backface-visibility: hidden;
 backface-visibility: hidden;
 -webkit-transform: translateZ(0);
 transform: translateZ(0);
}

/* Убираем transition при свайпе */
.habit-card.swiping {
 transition: none !important;
}

.habit-card.animating {
 transition: transform 0.3s ease-out;
}

/* Состояния карточки */
.habit-card.completed {
 background: #E8F5E9;
}

.habit-card.failed {
 background: #FFEBEE;
}

/* ВАЖНО: skipped остается БЕЗ стилей */
.habit-card.skipped {
 /* Намеренно пустое - используем базовый белый фон */
}

.habit-card:active {
 cursor: grabbing;
}

.habit-card-content {
 display: flex;
 align-items: center;
 height: 100%;
 position: relative;
 pointer-events: none; /* Важно для свайпов */
}

/* Иконка привычки */
.habit-icon {
 width: 48px;
 height: 48px;
 background: #E8F4F9;
 border-radius: 14px;
 display: flex;
 align-items: center;
 justify-content: center;
 margin-right: 12px;
 flex-shrink: 0;
 transition: background-color 0.3s ease;
}

.habit-icon.completed {
 background: #34C759;
}

.habit-icon.failed {
 background: #FF3B30;
}

/* skipped - без изменений */
.habit-icon.skipped {
 /* Остается базовый цвет #E8F4F9 */
}

.habit-emoji {
 font-size: 24px;
}

/* Информация о привычке */
.habit-info {
 flex: 1;
 min-width: 0;
}

.habit-title {
 font-size: 17px;
 font-weight: 600;
 color: #000000;
 margin: 0 0 4px 0;
 white-space: nowrap;
 overflow: hidden;
 text-overflow: ellipsis;
}

.habit-goal {
 font-size: 14px;
 color: #8E8E93;
 margin: 0;
 white-space: nowrap;
 overflow: hidden;
 text-overflow: ellipsis;
}

/* Индикатор статуса */
.status-indicator {
 position: absolute;
 right: 0;
 top: 50%;
 transform: translateY(-50%);
 width: 32px;
 height: 32px;
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 font-weight: bold;
 color: white;
}

.status-indicator.completed {
 background: #34C759;
}

.status-indicator.failed {
 background: #FF3B30;
}

.status-indicator.skipped {
 background: #FF9500;
}

/* Универсальная кнопка для свайпа */
.swipe-action-button {
 position: absolute;
 top: 0;
 bottom: 0;
 width: 100px;
 border-radius: 20px;
 display: flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 gap: 2px;
 opacity: 0;
 transform: scale(0.8);
 transition: opacity 0.2s ease-out, transform 0.2s ease-out;
 z-index: 1;
}

.swipe-action-button.visible {
 opacity: 1;
 transform: scale(1);
}

.swipe-action-icon {
 color: white;
 font-size: 24px;
 font-weight: bold;
 line-height: 1;
}

.swipe-action-text {
 color: white;
 font-size: 14px;
 font-weight: 600;
}

/* Стили для разных кнопок действий */
.done-button {
 background: #34C759;
 box-shadow: 0 2px 8px rgba(52, 199, 89, 0.3);
}

.undone-button {
 background: #FF3B30;
 box-shadow: 0 2px 8px rgba(255, 59, 48, 0.3);
}

.skip-button {
 background: #FF9500;
 box-shadow: 0 2px 8px rgba(255, 149, 0, 0.3);
}

/* Оптимизация для мобильных устройств */
@supports (-webkit-touch-callout: none) {
 /* iOS Safari specific */
 .habit-card {
   -webkit-transform: translateX(0);
   transform: translateX(0);
 }
}

/* Анимация появления */
@keyframes slideIn {
 from {
   opacity: 0;
   transform: translateY(10px);
 }
 to {
   opacity: 1;
   transform: translateY(0);
 }
}

.habit-card {
 animation: slideIn 0.3s ease-out;
}

/* Отключаем выделение текста при свайпе */
.habit-card * {
 user-select: none;
 -webkit-user-select: none;
 -moz-user-select: none;
 -ms-user-select: none;
 pointer-events: none;
}