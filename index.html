<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Habit Tracker</title>
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- üî• –ö–†–ò–¢–ò–ß–ù–û: –†–∞–Ω–Ω—è—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã (–î–û React) -->
    <script>
      (function initThemeImmediately() {
        try {
          // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É
          const savedTheme = localStorage.getItem('app-theme');
          
          // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Ç–µ–º—É
          let activeTheme = savedTheme;
          
          if (!activeTheme) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
              activeTheme = 'dark';
            } else {
              activeTheme = 'light';
            }
          }
          
          const isDark = activeTheme === 'dark';
          
          // –ü—Ä–∏–º–µ–Ω—è–µ–º CSS –∫–ª–∞—Å—Å –ù–ï–ú–ï–î–õ–ï–ù–ù–û
          document.documentElement.classList.remove('light-theme', 'dark-theme');
          document.documentElement.classList.add(activeTheme + '-theme');
          
          // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫ Telegram WebApp
          const applyTelegramTheme = function() {
            const tg = window.Telegram?.WebApp;
            if (!tg) return;
            
            try {
              if (isDark) {
                if (typeof tg.setBackgroundColor === 'function') {
                  tg.setBackgroundColor('#000000');
                }
                if (typeof tg.setHeaderColor === 'function') {
                  tg.setHeaderColor('#1C1C1E');
                }
                if (typeof tg.setBottomBarColor === 'function') {
                  tg.setBottomBarColor('#1C1C1E');
                }
              } else {
                if (typeof tg.setBackgroundColor === 'function') {
                  tg.setBackgroundColor('#F2F2F7');
                }
                if (typeof tg.setHeaderColor === 'function') {
                  tg.setHeaderColor('#FFFFFF');
                }
                if (typeof tg.setBottomBarColor === 'function') {
                  tg.setBottomBarColor('#FFFFFF');
                }
              }
            } catch (error) {
              console.error('Failed to apply Telegram theme early:', error);
            }
          };
          
          // –ü—Ä–∏–º–µ–Ω—è–µ–º Telegram —Ç–µ–º—É
          if (window.Telegram?.WebApp) {
            applyTelegramTheme();
          } else {
            // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏
            let attempts = 0;
            const checkTelegram = setInterval(function() {
              attempts++;
              if (window.Telegram?.WebApp) {
                clearInterval(checkTelegram);
                applyTelegramTheme();
              } else if (attempts > 50) {
                clearInterval(checkTelegram);
              }
            }, 100);
          }
          
        } catch (error) {
          console.error('Early theme init failed:', error);
        }
      })();
    </script>
    
    <!-- Inline —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–∏–≥–∞–Ω–∏—è -->
    <style>
      /* –ü—Ä–∏–º–µ–Ω—è–µ–º –±–∞–∑–æ–≤—ã–µ —Ü–≤–µ—Ç–∞ –î–û –∑–∞–≥—Ä—É–∑–∫–∏ CSS */
      html.light-theme {
        background-color: #F2F2F7;
        color: #1D1D1F;
      }
      
      html.dark-theme {
        background-color: #000000;
        color: #FFFFFF;
      }
      
      body {
        margin: 0;
        padding: 0;
        background-color: inherit;
        color: inherit;
        transition: none !important; /* –û—Ç–∫–ª—é—á–∞–µ–º transition –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ */
      }
    </style>

    <!-- Telegram Analytics -->
<script 
    src="https://tganalytics.xyz/index.js" 
    type="text/javascript"
></script>

<script>
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  window.addEventListener('DOMContentLoaded', function() {
    if (window.telegramAnalytics) {
      window.telegramAnalytics.init({
        token: 'eyJhcHBfbmFtZSI6IkhhYml0bHkiLCJhcHBfdXJsIjoiaHR0cHM6Ly9hcHAuZXZlbnRtYXRlLmFzaWEiLCJhcHBfZG9tYWluIjoiYXBwLmV2ZW50bWF0ZS5hc2lhIn0=!YXZsLuI7exqR9p1Kcg0ohtKQd+l+j2eU/WAtFUzC53E=',
        appName: 'Habitly',
      });
      console.log('‚úÖ Telegram Analytics initialized via script');
    }
  });
</script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>


     <!-- Eruda –¥–ª—è –¥–µ–±–∞–≥–∞ (–º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –≤ –ø—Ä–æ–¥–µ) -->
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>
  </body>
</html>